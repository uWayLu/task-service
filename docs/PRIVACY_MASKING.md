# å€‹è³‡é®ç½©åŠŸèƒ½è©³ç´°èªªæ˜

## ğŸ“‹ æ¦‚è¿°

å€‹è³‡é®ç½©åŠŸèƒ½å¯è‡ªå‹•åµæ¸¬ä¸¦é®ç½©æ–‡ä»¶ä¸­çš„æ•æ„Ÿå€‹äººè³‡æ–™ï¼Œä¿è­·éš±ç§ä¸¦ç¬¦åˆè³‡æ–™ä¿è­·æ³•è¦ã€‚

## ğŸ” æ”¯æ´çš„å€‹è³‡é¡å‹

### å°ç£èº«åˆ†è­‰å­—è™Ÿ
- **æ ¼å¼**: 1 å€‹å¤§å¯«è‹±æ–‡å­—æ¯ + 1 æˆ– 2 é–‹é ­ + 8 å€‹æ•¸å­—
- **ç¯„ä¾‹**: A123456789
- **é®ç½©**: A*********9ï¼ˆä¿ç•™é¦–å°¾ï¼‰

### æ‰‹æ©Ÿè™Ÿç¢¼
- **æ ¼å¼**: 09 é–‹é ­ + 8 å€‹æ•¸å­—
- **ç¯„ä¾‹**: 0912345678
- **é®ç½©**: 0912****78

### å¸‚è©±
- **æ ¼å¼**: 0 é–‹é ­ + å€ç¢¼ + è™Ÿç¢¼
- **ç¯„ä¾‹**: 02-12345678
- **é®ç½©**: 02-****5678

### ä¿¡ç”¨å¡è™Ÿ
- **æ ¼å¼**: 4 çµ„ 4 ä½æ•¸å­—
- **ç¯„ä¾‹**: 1234-5678-9012-3456
- **é®ç½©**: **** **** **** 3456ï¼ˆåƒ…ä¿ç•™å¾Œ 4 ç¢¼ï¼‰

### é›»å­éƒµä»¶
- **æ ¼å¼**: æ¨™æº– email æ ¼å¼
- **ç¯„ä¾‹**: example@gmail.com
- **é®ç½©**: e***@gmail.com

### éŠ€è¡Œå¸³è™Ÿ
- **æ ¼å¼**: 10-16 ä½æ•¸å­—
- **ç¯„ä¾‹**: 1234567890123
- **é®ç½©**: *********0123ï¼ˆåƒ…ä¿ç•™å¾Œ 4 ç¢¼ï¼‰

### åœ°å€
- **æ ¼å¼**: å°ç£åœ°å€ï¼ˆç¸£å¸‚/é„‰é®/è·¯è¡—/è™Ÿï¼‰
- **ç¯„ä¾‹**: å°åŒ—å¸‚ä¸­æ­£å€å¿ å­æ±è·¯100è™Ÿ
- **é®ç½©**: å°åŒ—å¸‚ä¸­æ­£å€***

### å‡ºç”Ÿæ—¥æœŸ
- **æ ¼å¼**: æ°‘åœ‹å¹´æˆ–è¥¿å…ƒå¹´
- **ç¯„ä¾‹**: 80å¹´5æœˆ15æ—¥ æˆ– 1991/05/15
- **é®ç½©**: ****/**/**

### è‡ªè¨‚å§“å â­ æ–°å¢
- **æ ¼å¼**: å¾ç’°å¢ƒè®Šæ•¸è®€å–æˆ–æ‰‹å‹•æŒ‡å®š
- **ç¯„ä¾‹**: ç‹å°æ˜ã€å¼µä¸‰ã€æå››
- **é®ç½©**: å®Œå…¨é®ç½©ï¼ˆ****ï¼‰
- **è¨­å®š**: åœ¨ `.env` ä¸­è¨­å®š `PRIVACY_CUSTOM_NAMES=å§“å1,å§“å2,å§“å3`

## ğŸ§  é®ç½©æ¨¡å¼

### æ¨™æº–æ¨¡å¼ï¼ˆPrivacyMaskerï¼‰

åŸºæœ¬å€‹è³‡é®ç½©ï¼Œé©åˆä¸€èˆ¬ä½¿ç”¨ã€‚

```python
from utils.privacy_masker import PrivacyMasker

masker = PrivacyMasker()
result = masker.mask(text)

print(result.masked)  # é®ç½©å¾Œçš„æ–‡å­—
print(result.mask_count)  # é®ç½©é …ç›®æ•¸é‡
print(result.sensitive_items)  # æ•æ„Ÿè³‡æ–™æ¸…å–®
```

### æ™ºæ…§æ¨¡å¼ï¼ˆSmartPrivacyMaskerï¼‰

åŠ å¼·ç‰ˆé®ç½©ï¼Œæ”¯æ´ç©æ¥µæ¨¡å¼ã€‚

```python
from utils.privacy_masker import SmartPrivacyMasker

# ç©æ¥µæ¨¡å¼ï¼šé¡å¤–é®ç½©é‡‘é¡å’Œé•·æ•¸å­—
masker = SmartPrivacyMasker(aggressive=True)
result = masker.mask(text)
```

ç©æ¥µæ¨¡å¼é¡å¤–é®ç½©ï¼š
- ğŸ’° é‡‘é¡ï¼ˆNT$ 12,345 â†’ NT$ ***ï¼‰
- ğŸ”¢ é•·æ•¸å­—ï¼ˆ6 ä½ä»¥ä¸Š â†’ ******ï¼‰

### é¸æ“‡æ€§é®ç½©

åªé®ç½©ç‰¹å®šé¡å‹çš„å€‹è³‡ã€‚

```python
# åªé®ç½©èº«åˆ†è­‰å’Œé›»è©±
masker = PrivacyMasker(mask_types=['taiwan_id', 'phone'])
result = masker.mask(text)
```

## ğŸ“Š é®ç½©çµæœ

### MaskResult ç‰©ä»¶

```python
@dataclass
class MaskResult:
    original: str           # åŸå§‹æ–‡å­—
    masked: str            # é®ç½©å¾Œçš„æ–‡å­—
    sensitive_items: List  # æ•æ„Ÿè³‡æ–™æ¸…å–®
    mask_count: int        # é®ç½©é …ç›®ç¸½æ•¸
```

### sensitive_items çµæ§‹

```python
{
    'type': 'taiwan_id',           # é¡å‹ä»£ç¢¼
    'type_name': 'èº«åˆ†è­‰å­—è™Ÿ',      # é¡å‹åç¨±
    'original': 'A123456789',      # åŸå§‹å€¼
    'masked': 'A*********9',       # é®ç½©å€¼
    'position': (10, 20)           # ä½ç½®ï¼ˆèµ·å§‹, çµæŸï¼‰
}
```

## ğŸ› ï¸ ä½¿ç”¨æ–¹å¼

### 0. è¨­å®šè‡ªè¨‚å§“åï¼ˆå¯é¸ï¼‰â­ æ–°å¢

åœ¨ `.env` æª”æ¡ˆä¸­è¨­å®šè¦é®ç½©çš„å§“åï¼š

```env
# æ–¹æ³• 1: é€—è™Ÿåˆ†éš”ï¼ˆæ¨è–¦ï¼‰
PRIVACY_CUSTOM_NAMES=ç‹å°æ˜,å¼µä¸‰,æå››

# æ–¹æ³• 2: ç·¨è™Ÿæ–¹å¼
PRIVACY_NAME_1=ç‹å°æ˜
PRIVACY_NAME_2=å¼µä¸‰
PRIVACY_NAME_3=æå››
```

è¨­å®šå¾Œï¼Œç³»çµ±æœƒè‡ªå‹•é®ç½©é€™äº›å§“åã€‚

### 1. åŸºæœ¬é®ç½©

```python
from utils.privacy_masker import quick_mask

# å¿«é€Ÿé®ç½©
masked_text = quick_mask("èº«åˆ†è­‰ï¼šA123456789")
print(masked_text)  # èº«åˆ†è­‰ï¼šA*********9
```

### 2. å®Œæ•´é®ç½©

```python
from utils.privacy_masker import PrivacyMasker

masker = PrivacyMasker()
result = masker.mask("""
    å§“åï¼šç‹å°æ˜
    èº«åˆ†è­‰ï¼šA123456789
    æ‰‹æ©Ÿï¼š0912345678
    åœ°å€ï¼šå°åŒ—å¸‚ä¸­æ­£å€å¿ å­æ±è·¯100è™Ÿ
""")

print(f"é®ç½©äº† {result.mask_count} å€‹é …ç›®")
print(result.masked)

for item in result.sensitive_items:
    print(f"{item['type_name']}: {item['original']} â†’ {item['masked']}")
```

### 3. åµæ¸¬ï¼ˆä¸é®ç½©ï¼‰

```python
from utils.privacy_masker import detect_sensitive_info

items = detect_sensitive_info("èº«åˆ†è­‰ï¼šA123456789")

for item in items:
    print(f"æ‰¾åˆ° {item['type_name']}: {item['masked']}")
```

### 4. è‡ªè¨‚å§“åé®ç½© â­ æ–°å¢

```python
from utils.privacy_masker import PrivacyMasker

# æ–¹æ³• 1: å¾ç’°å¢ƒè®Šæ•¸è®€å–ï¼ˆè‡ªå‹•ï¼‰
masker = PrivacyMasker()  # æœƒè‡ªå‹•è®€å– PRIVACY_CUSTOM_NAMES

# æ–¹æ³• 2: æ‰‹å‹•æŒ‡å®šå§“å
masker = PrivacyMasker(custom_names=['ç‹å°æ˜', 'å¼µä¸‰', 'æå››'])

# æ–¹æ³• 3: å‹•æ…‹åŠ å…¥å§“å
masker = PrivacyMasker()
masker.add_custom_names(['æ–°å§“å1', 'æ–°å§“å2'])

# ä½¿ç”¨
result = masker.mask("è¯çµ¡äººï¼šç‹å°æ˜ï¼Œè² è²¬äººï¼šå¼µä¸‰")
print(result.masked)  # è¯çµ¡äººï¼š***ï¼Œè² è²¬äººï¼š***
```

### 5. é®ç½©å­—å…¸

```python
data = {
    'name': 'ç‹å°æ˜',
    'id': 'A123456789',
    'phone': '0912345678',
    'transactions': [
        {'date': '2024-01-01', 'account': '1234567890123'}
    ]
}

masker = PrivacyMasker()
masked_data = masker.mask_dict(data)
# æ‰€æœ‰å­—ä¸²å€¼éƒ½æœƒè¢«é®ç½©
```

## ğŸ§ª æ¸¬è©¦å·¥å…·

### åŸ·è¡Œæ¸¬è©¦

```bash
# åŸ·è¡Œå€‹è³‡é®ç½©æ¸¬è©¦
python test_privacy.py
```

æ¸¬è©¦å…§å®¹ï¼š
- âœ… åŸºæœ¬é®ç½©æ¸¬è©¦
- âœ… æ™ºæ…§é®ç½©æ¸¬è©¦ï¼ˆç©æ¥µæ¨¡å¼ï¼‰
- âœ… åƒ…åµæ¸¬æ¸¬è©¦
- âœ… é¸æ“‡æ€§é®ç½©æ¸¬è©¦
- âœ… æ”¯æ´é¡å‹åˆ—è¡¨

### è‡ªè¨‚æ¸¬è©¦

```python
#!/usr/bin/env python3
from utils.privacy_masker import PrivacyMasker

# ä½ çš„æ¸¬è©¦æ–‡å­—
text = """
åœ¨é€™è£¡æ”¾å…¥ä½ è¦æ¸¬è©¦çš„æ–‡å­—
"""

masker = PrivacyMasker()
result = masker.mask(text)

print("åŸå§‹æ–‡å­—ï¼š")
print(text)
print("\né®ç½©å¾Œï¼š")
print(result.masked)
print(f"\nå…±é®ç½© {result.mask_count} å€‹é …ç›®")
```

## ğŸ”§ é€²éšè¨­å®š

### è‡ªè¨‚é®ç½©è¦å‰‡

å¯ä»¥æ“´å±• `PrivacyMasker` é¡åˆ¥ä¾†æ–°å¢è‡ªè¨‚è¦å‰‡ï¼š

```python
class CustomMasker(PrivacyMasker):
    def __init__(self):
        super().__init__()
        
        # æ–°å¢è‡ªè¨‚è¦å‰‡
        self.PATTERNS['custom_id'] = {
            'pattern': r'YOUR-REGEX-PATTERN',
            'name': 'è‡ªè¨‚ ID',
            'mask': lambda m: '***'  # é®ç½©å‡½æ•¸
        }
        
        self.compiled_patterns = self._compile_patterns()
```

### ä¸Šä¸‹æ–‡æ™ºæ…§é®ç½©

æ ¹æ“šæ–‡ä»¶å…§å®¹èª¿æ•´é®ç½©ç­–ç•¥ï¼š

```python
from utils.privacy_masker import SmartPrivacyMasker

masker = SmartPrivacyMasker()

# æ ¹æ“šé—œéµå­—èª¿æ•´
result = masker.mask_with_context(
    text,
    context_keywords=['å¸³å–®', 'äº¤æ˜“']
)
```

## âš ï¸ æ³¨æ„äº‹é …

### 1. é®ç½©é™åˆ¶

- æ­£å‰‡è¡¨é”å¼å¯èƒ½æœ‰èª¤åˆ¤ï¼ˆFalse Positiveï¼‰
- æŸäº›æ ¼å¼è®Šé«”å¯èƒ½ç„¡æ³•åµæ¸¬
- é®ç½©å¾Œä»å¯èƒ½æ¨æ¸¬åŸå§‹è³‡æ–™

### 2. æ•ˆèƒ½è€ƒé‡

- å¤§é‡æ–‡å­—è™•ç†å¯èƒ½è¼ƒæ…¢
- å»ºè­°å°å¤§æª”æ¡ˆåˆ†æ®µè™•ç†
- å¯ä»¥é¸æ“‡æ€§é®ç½©ä»¥æå‡æ•ˆèƒ½

### 3. éš±ç§ä¿è­·

- **é®ç½©ä¸ç­‰æ–¼åŠ å¯†**ï¼Œåªæ˜¯è¦–è¦ºä¸Šçš„éš±è—
- æ•æ„Ÿè³‡æ–™ä»æ‡‰é¿å…é•·æœŸå„²å­˜
- éµå®ˆ GDPRã€å€‹è³‡æ³•ç­‰ç›¸é—œæ³•è¦

### 4. æ­£ç¢ºæ€§

- å»ºè­°äººå·¥å¯©æŸ¥é®ç½©çµæœ
- é‡è¦æ–‡ä»¶æ‡‰ä½¿ç”¨ç©æ¥µæ¨¡å¼
- å®šæœŸæ›´æ–°é®ç½©è¦å‰‡

## ğŸ“ æœ€ä½³å¯¦è¸

### âœ… å»ºè­°åšæ³•

1. **é è¨­å•Ÿç”¨é®ç½©**ï¼šè™•ç†æ•æ„Ÿæ–‡ä»¶æ™‚é è¨­é–‹å•Ÿ
2. **è¨˜éŒ„é®ç½©è³‡è¨Š**ï¼šä¿å­˜é®ç½©çµ±è¨ˆä»¥ä¾›ç¨½æ ¸
3. **åˆ†å±¤é®ç½©**ï¼šæ ¹æ“šè³‡æ–™æ•æ„Ÿåº¦é¸æ“‡æ¨¡å¼
4. **å®šæœŸå¯©æŸ¥**ï¼šæª¢æŸ¥é®ç½©æ•ˆæœèˆ‡èª¤åˆ¤ç‡

### âŒ é¿å…åšæ³•

1. ä¸è¦å°‡åŸå§‹èˆ‡é®ç½©æ–‡å­—ä¸€èµ·å‚³é€
2. ä¸è¦å‡è¨­é®ç½© 100% æº–ç¢º
3. ä¸è¦åœ¨ä¸å®‰å…¨ç®¡é“å‚³è¼¸åŸå§‹è³‡æ–™
4. ä¸è¦é•·æœŸå„²å­˜æœªé®ç½©çš„æ•æ„Ÿè³‡æ–™

## ğŸ”— ç›¸é—œæ–‡ä»¶

- [AI æ•´åˆèªªæ˜](AI_INTEGRATION.md) - çµåˆ AI åˆ†æ
- [PDF è™•ç†](PDF_TESTING.md) - PDF è§£æèˆ‡é®ç½©
- [API æ–‡ä»¶](../README.md) - API ç«¯é»ä½¿ç”¨

## ğŸ†˜ å¸¸è¦‹å•é¡Œ

### Q: é®ç½©æœƒå½±éŸ¿ AI åˆ†ææ•ˆæœå—ï¼Ÿ

A: æœƒæœ‰ä¸€å®šå½±éŸ¿ï¼Œä½†å°æ–¼çµæ§‹åŒ–è³‡è¨Šæå–ï¼ˆå¦‚é‡‘é¡ã€æ—¥æœŸï¼‰å½±éŸ¿è¼ƒå°ã€‚å»ºè­°æ ¹æ“šéœ€æ±‚æ¬Šè¡¡éš±ç§èˆ‡æº–ç¢ºæ€§ã€‚

### Q: å¯ä»¥é‚„åŸé®ç½©å¾Œçš„è³‡æ–™å—ï¼Ÿ

A: ä¸è¡Œï¼Œé®ç½©æ˜¯å–®å‘çš„ã€‚å¦‚éœ€è¦åŸå§‹è³‡æ–™ï¼Œè«‹å¦å¤–ä¿å­˜ï¼ˆåŠ å¯†ï¼‰ã€‚

### Q: å¦‚ä½•è™•ç†èª¤åˆ¤ï¼Ÿ

A: å¯ä»¥èª¿æ•´æ­£å‰‡è¡¨é”å¼æˆ–ä½¿ç”¨é¸æ“‡æ€§é®ç½©æ’é™¤ç‰¹å®šé¡å‹ã€‚

### Q: æ”¯æ´å…¶ä»–åœ‹å®¶çš„å€‹è³‡æ ¼å¼å—ï¼Ÿ

A: ç›®å‰ä¸»è¦æ”¯æ´å°ç£æ ¼å¼ï¼Œä½†å¯ä»¥é€éæ“´å±•é¡åˆ¥æ–°å¢å…¶ä»–åœ‹å®¶çš„è¦å‰‡ã€‚

